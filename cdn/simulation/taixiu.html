<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" href="https://hoanganhdinhngoc.github.io/images/Koi-Kanji.png">
    <title>Nier Simulation || Tài Xỉu</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css?family=Montserrat:200,400,700');

        :root {
            --primary-color: #008a008a;
            --secondary-color: #85000083;
            --nier-dark: #4b4340;
            --nier-beige: #ccc6b0;
            --nier-panel: rgba(216, 210, 186, .5);
            --nier-bg-btn: #4e493a;
            --nier-text-light: #d3cebb;
            --coin-heads:#008a008a;
            --coin-tails:#85000083;
        }

        * {
            box-sizing: border-box;
            scrollbar-color: rgba(100,98,86,0.8) rgba(143, 139, 122, 0.7);
            margin: 0;
            padding: 0;
        }

        ::-moz-selection {
        /* Code for Firefox */
        color: #d3cebb;
        background: rgba(100, 98, 86, 0.8);
        }

        ::selection {
        color: #d3cebb;
        background: rgba(100, 98, 86, 0.8);
        }


        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--nier-beige);
            background-image: linear-gradient(90deg, rgba(198, 192, 170, .5) 30%, transparent 30%),
                              linear-gradient(rgba(198, 192, 170, .5) 30%, transparent 30%);
            background-size: 5px 5px;
            color: var(--nier-dark);
            display: flex;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        .warp-container {
            margin-top: 5em;
        }

        /* Container chính sử dụng Flexbox */
        .coreSystem {
            display: flex;
            flex-direction: row; /* Desktop nằm ngang */
            gap: 1em; /* Khoảng cách 5em theo ý Sir */
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            align-items: flex-start;
        }

        .title-main {
            width: 100%;
            font-size: 26px;
            font-family: 'Montserrat', sans-serif;
            color: #4b4340;
            text-shadow: 4px 5px rgba(162, 156, 142, .8);
            margin-bottom: 30px;
            text-align: left;
        }

        /* Tách biệt 2 vùng thành các Section riêng */
        .section {
            background: var(--nier-panel);
            box-shadow: 2px 2px 1px #4f4b42;
            padding: 20px;
            border-radius: 0px;
        }

        .betting-panel {
            flex: 0 0 400px;
        }

        .stats-panel {
            flex: 1;
            min-width: 0;
        }

        /* Coin & UI Elements */
        .coin-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

        #coin {
            width: 90px;
            height: 90px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 1s ease-out;
            margin-bottom: 15px;
        }

        .coin-face {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            backface-visibility: hidden;
            border: 4px solid var(--nier-dark);
        }

        .heads { background: var(--coin-heads); color: var(--nier-text-light); transform: rotateY(0deg); }
        .tails { background: var(--coin-tails); color: var(--nier-text-light); transform: rotateY(180deg); }
        .flipping { animation: flip 0.2s infinite linear; }

        @keyframes flip {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        .selection-group {
            display: flex;
            gap: 15px;
            width: 100%;
        }

        .selection-btn {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--nier-dark);
            cursor: pointer;
            background: transparent;
            font-family: 'Montserrat', sans-serif;
            font-weight: bold;
            transition: 0.3s;
        }

        .selection-btn.active-sap { background: var(--primary-color) !important; color: #d3cebb; border-color: var(--primary-color); }
        .selection-btn.active-ngua { background: var(--secondary-color) !important; color: #d3cebb; border-color: var(--secondary-color); }

        .balance-box { font-size: 22px; font-weight: bold; margin: 20px 0; text-align: center; }
        
        .toolzone {
            width: 100%;
            padding: 12px;
            font-family: 'Montserrat', sans-serif;
            font-size: 18px;
            outline: none;
            border: 2px solid var(--nier-dark);
            background: rgba(216, 210, 186, .5);
            color: #4b4340;
            text-align: center;
        }

        .stepper-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
        }

        .themebutton {
            cursor: pointer;
            padding: 10px 15px;
            font-weight: bold;
            color: #4b4340;
            border: none;
            background: linear-gradient(to right, #4e493a 50%, rgba(0, 0, 0, 0.2) 50%);
            background-size: 200% 100%;
            background-position: right bottom;
            transition: all .2s ease-out;
            font-family: 'Montserrat', sans-serif;
            text-align: center;
        }

        .themebutton:hover {
            color: #d3cebb;
            background-position: left bottom;
        }

        .taibutton {
            background: linear-gradient(to right, #008a008a 50%, rgba(0, 0, 0, 0) 50%);
            background-size: 200% 100%;
            background-position: right bottom;
            transition: all .2s ease-out;
        }

        .taibutton:hover {
            color: #d3cebb;
            background-position: left bottom;
        }

        .xiubutton {
            background: linear-gradient(to right, #85000083 50%, rgba(0, 0, 0, 0) 50%);
            background-size: 200% 100%;
            background-position: right bottom;
            transition: all .2s ease-out;
        }

        .xiubutton:hover {
            color: #d3cebb;
            background-position: left bottom;
        }

        select#quickAmount {
            padding: 9px;
            background: var(--nier-panel);
            border: 2px solid var(--nier-dark);
            font-family: 'Montserrat', sans-serif;
            font-weight: bold;
        }

        .play-btn { width: 100%; font-size: 18px; padding: 15px; }

        /* Bảng Thống Kê */
        .sectionTitle {
            padding: 1% 2%;
            color: #d3cebb;
            background: rgba(100, 98, 86, 0.8);
            font-weight: bold;
            margin-bottom: 15px;
        }

        .table-scroll {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid var(--nier-dark);
            scrollbar-width: thin;
        }

        table { width: 100%; border-collapse: collapse; }
        th { background: #4e493a; color: #d3cebb; padding: 12px; position: sticky; top: 0; font-size: 13px; }
        td { padding: 12px 5px; text-align: center; border-bottom: 1px solid rgba(75, 67, 64, 0.2); font-size: 13px; }

        .win { color: var(--primary-color); font-weight: bold; }
        .loss { color: var(--secondary-color); font-weight: bold; }

        .summary-box {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            padding: 15px;
            padding-left: 3em;
            background: rgba(100, 98, 86, 0.1);
        }

        .summary-value { display: block; font-weight: bold; font-size: 16px; margin-top: 5px; }

        /* RESPONSIVE CHO MOBILE */
        @media only screen and (max-width: 768px) {
            body { padding: 10px; }
            .coreSystem {
                flex-direction: column; /* Xếp dọc */
                gap: 2em; /* Giảm khoảng cách cho mobile */
                padding: 0;
            }

            .betting-panel, .stats-panel {
                flex: none;
                width: 100%;
            }

            .title-main {
                font-size: 30px;
                text-align: center;
                margin-bottom: 15px;
            }

            .table-scroll {
                max-height: 300px;
            }

            th, td {
                font-size: 11px;
                padding: 8px 2px;
            }
        }
    </style>

    <script>
    $(document).ready(function () {
              // Sounds
      var tutorialSound = document.getElementById("tutorial-sound");
      var hoverSound = document.getElementById("hover-sound");
      var clickSound = document.getElementById("click-sound");
      var openlinkSound = document.getElementById("open-link-sound");
      $(".dropContent,.tutorial").hover(function () {
        hoverSound.play();
      }, function () {
        hoverSound.load();
      });

      $(".tutorial").click(function () {
        tutorialSound.play();
      });

      $("a").click(function () {
        openlinkSound.play();
      });

      $(".themebutton").click(function () {
        clickSound.play();
      });

      $(".dropContent").click(function () {
        tutorialSound.play();
      });

      $("a").click(function () {
        openlinkSound.play();
      });

      // Sounds control

    });
    </script>

</head>
<body>

    <audio id="tutorial-sound">
    <source src="https://hoanganhdinhngoc.github.io/cdn/sounds/core_1.ogg" type="audio/ogg">
  </audio>
  <audio id="hover-sound">
    <source src="https://hoanganhdinhngoc.github.io/cdn/sounds/core_16.ogg" type="audio/ogg">
  </audio>
  <audio id="click-sound">
    <source src="https://hoanganhdinhngoc.github.io/cdn/sounds/core_52.ogg" type="audio/ogg">
  </audio>
  <audio id="open-link-sound">
    <source src="https://hoanganhdinhngoc.github.io/cdn/sounds/core_58.ogg" type="audio/ogg">
  </audio>


<div class="warp-container" style="width: 100%; max-width: 1200px;">
    <h1 class="title-main">TÀI XỈU GIẢ LẬP</h1>

    <div class="coreSystem">
        <div class="betting-panel section">
            <div class="coin-container">
                <div id="coin">
                    <div class="coin-face heads">Tài</div>
                    <div class="coin-face tails">Xỉu</div>
                </div>
                <div class="selection-group">
                    <button id="btnSap" class="selection-btn dropContent taibutton" onclick="selectSide('sap')">CHỌN TÀI</button>
                    <button id="btnNgua" class="selection-btn dropContent xiubutton" onclick="selectSide('ngua')">CHỌN XỈU</button>
                </div>
            </div>

            <div class="balance-box">Số dư: <span id="balance">10,000</span> USD</div>
            
            <div class="input-group">
                <label style="font-weight: bold; margin-bottom: 5px; display: block;">MỨC CƯỢC</label>
                <input type="number" id="betAmount" class="toolzone" value="10" min="1">
            </div>

            <div class="stepper-container">
                <button class="themebutton" onclick="modifyBet('minus')">−</button>
                <select id="quickAmount">
                    <option value="1">1</option>
                    <option value="5">5</option>
                    <option value="10" selected>10</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                    <option value="500">500</option>
                    <option value="1000">1,000</option>
                </select>
                <button class="themebutton" onclick="modifyBet('plus')">+</button>
            </div>

            <button class="themebutton play-btn" id="playBtn" onclick="startFlip()">CHƠI</button>
        </div>

        <div class="stats-panel">
            <h2 class="sectionTitle">THỐNG KÊ</h2>
            <div class="section" style="padding: 0;">
                <div class="table-scroll">
                    <table>
                        <thead>
                            <tr>
                                <th>Ván</th>
                                <th>Cược</th>
                                <th>Chọn</th>
                                <th>Kết quả</th>
                                <th>Lợi nhuận</th>
                            </tr>
                        </thead>
                        <tbody id="historyBody"></tbody>
                    </table>
                </div>
            </div>

            <div class="summary-box section">
                <div>Tổng cược<span id="totalWagered" class="summary-value">0</span></div>
                <div>Tổng lợi nhuận<span id="totalProfit" class="summary-value">0</span></div>
                <div>Tỷ lệ thắng<span id="winRate" class="summary-value">0%</span></div>
            </div>
        </div>
    </div>
</div>

<script>
    let balance = 10000;
    let roundCount = 0;
    let totalWagered = 0;
    let totalProfit = 0;
    let totalWins = 0;
    let selectedSide = null;

    function selectSide(side) {
        selectedSide = side;
        document.getElementById('btnSap').classList.toggle('active-sap', side === 'sap');
        document.getElementById('btnNgua').classList.toggle('active-ngua', side === 'ngua');
    }

    function modifyBet(type) {
        const betInput = document.getElementById('betAmount');
        let currentBet = parseInt(betInput.value) || 0;
        let changeValue = parseInt(document.getElementById('quickAmount').value);
        betInput.value = (type === 'plus') ? currentBet + changeValue : Math.max(1, currentBet - changeValue);
    }

    function startFlip() {
        const betAmount = parseInt(document.getElementById('betAmount').value);
        const playBtn = document.getElementById('playBtn');
        const coin = document.getElementById('coin');

        if (!selectedSide) { alert("Sir vui lòng chọn Tài hoặc Xỉu!"); return; }
        if (isNaN(betAmount) || betAmount <= 0) { alert("Mức cược không hợp lệ!"); return; }
        if (betAmount > balance) { alert("Sir không đủ số dư!"); return; }

        playBtn.disabled = true;
        coin.classList.add('flipping');
        const result = Math.random() < 0.5 ? 'sap' : 'ngua';

        setTimeout(() => {
            coin.classList.remove('flipping');
            coin.style.transform = (result === 'sap') ? 'rotateY(0deg)' : 'rotateY(180deg)';
            setTimeout(() => {
                processResult(result, betAmount);
                playBtn.disabled = false;
            }, 300);
        }, 1000);
    }

    function processResult(result, betAmount) {
        roundCount++;
        totalWagered += betAmount;
        const isWin = (selectedSide === result);
        let profit = isWin ? betAmount : -betAmount;
        balance += profit;
        if (isWin) totalWins++;
        totalProfit += profit;

        document.getElementById('balance').innerText = balance.toLocaleString();
        const row = document.getElementById('historyBody').insertRow(0);
        row.innerHTML = `
            <td>#${roundCount}</td>
            <td>${betAmount.toLocaleString()}</td>
            <td>${selectedSide === 'sap' ? 'Tài' : 'Xỉu'}</td>
            <td class="${isWin ? 'win' : 'loss'}">${result === 'sap' ? 'TÀI' : 'XỈU'}</td>
            <td class="${profit >= 0 ? 'win' : 'loss'}">${profit > 0 ? '+' : ''}${profit.toLocaleString()}</td>
        `;
        updateSummary();
    }

    function updateSummary() {
        document.getElementById('totalWagered').innerText = totalWagered.toLocaleString();
        const profitEl = document.getElementById('totalProfit');
        profitEl.innerText = (totalProfit > 0 ? '+' : '') + totalProfit.toLocaleString();
        profitEl.style.color = totalProfit >= 0 ? '#008a008a' : '#85000083';
        const winRate = roundCount > 0 ? ((totalWins / roundCount) * 100).toFixed(1) : 0;
        document.getElementById('winRate').innerText = winRate + "%";
    }
</script>

</body>
</html>